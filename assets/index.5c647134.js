(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const y=e=>`hsl(30, 15%, ${45-3*e}%)`,D=e=>`${10-e/2}rem`,m=e=>{const t=document.createElement("div");return t.className="disc",t.id="disc--"+e,t.textContent=e.toString(),t.style.width=D(9-e),t.style.backgroundColor=y(e),t},a=(e,t=null,n="currentColor")=>{const l="http://www.w3.org/2000/svg",o=document.createElementNS(l,"svg"),s=document.createElementNS(l,"path");return o.classList.add(t?"svg--"+t:"svg"),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("fill",n),s.setAttribute("d",e),o.append(s),o},d=e=>e.classList.remove("disabled"),i=e=>e.classList.add("disabled");function T(e){if(this.style.opacity="0.4",e.dataTransfer===null){console.log("hmm");return}e.dataTransfer.effectAllowed="move",globalThis.triggerDisc=this}function f(){this.style.opacity="1",globalThis.triggerDisc=null}const c=e=>{!e||(e.draggable=!0,e.style.cursor="move",e.addEventListener("dragstart",T),e.addEventListener("dragend",f))},E=e=>{!e||(e.draggable=!1,e.style.removeProperty("cursor"),e.removeEventListener("dragstart",T),e.removeEventListener("dragend",f))};var M="M7.03 13.92H11.03V5L13.04 4.97V13.92H17.03L12.03 18.92Z",B="M7.03 9.97H11.03V18.89L13.04 18.92V9.97H17.03L12.03 4.97Z",S="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",w="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",x="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z";const q=()=>{var e;globalThis.discs.push(m(globalThis.discs.length+1)),globalThis.rods[0].prepend((e=globalThis.discs.at(-1))!=null?e:""),globalThis.rods[0].children.length===1&&c(globalThis.rods[0].lastChild),globalThis.discs.length===9?i(globalThis.upButton):globalThis.discs.length===4&&d(globalThis.downButton),u()},k=()=>{var e;(e=globalThis.discs.pop())==null||e.remove(),globalThis.discs.length===3?i(globalThis.downButton):globalThis.discs.length===8&&d(globalThis.upButton),u()},A=()=>{const e=globalThis.undoMoves.pop();e&&(console.log("undo"),g(e,globalThis.redoMoves))},N=()=>{const e=globalThis.redoMoves.pop();e&&(console.log("redo"),g(e,globalThis.undoMoves))},O=()=>{var r;const[e,t,n,l,o]=[1,2,3,4,5].map(()=>document.createElement("button"));e.append(a(x,"landscape")),e.addEventListener("click",A),o.append(a(w,"landscape")),o.addEventListener("click",N),t.append(a(M,"fix")),t.addEventListener("click",k),l.append(a(B,"fix")),l.addEventListener("click",q),n.id="counter",n.textContent="0",i(t),i(e),i(o);const s={undoButton:e,downButton:t,counter:n,upButton:l,redoButton:o};Object.assign(globalThis,s),(r=document.querySelector("#row-buttons"))==null||r.append(...Object.values(s))},v=e=>{document.querySelector("#dialog-message").textContent=e,globalThis.confirmDialog.showModal()},u=()=>{globalThis.counter.textContent=globalThis.discs.length.toString()},p=()=>{globalThis.movesCounter.textContent=globalThis.undoMoves.length.toString()},L=()=>{globalThis.timeCounter.textContent=globalThis.timeLeft+" seconds"},g=({disc:e,triggerRod:t,targetRod:n},l=null)=>{if(globalThis.timeLeft===0)return;(l!=null?l:globalThis.undoMoves).push({disc:e,targetRod:t,triggerRod:n}),E(n.lastChild),n.append(e),c(t.lastChild),l===null&&(globalThis.redoMoves.length=0),globalThis.undoMoves.length===0?i(globalThis.undoButton):d(globalThis.undoButton),globalThis.redoMoves.length===0?i(globalThis.redoButton):d(globalThis.redoButton),p(),globalThis.rods[0].children.length+globalThis.rods[1].children.length===0&&v("Congratulations, You Won!")},h=e=>{var l;const{triggerDisc:t}=globalThis,n=(l=e.querySelector(".rod"))==null?void 0:l.lastChild;return Number(n==null?void 0:n.innerText)>Number(t==null?void 0:t.innerText)||!n};function V(e){return e.preventDefault(),!1}function H(){h(this)?this.classList.add("over"):this.classList.add("over--invalid")}function F(){h(this)?this.classList.remove("over"):this.classList.remove("over--invalid")}function Z(e){var t;return h(this)?(this.classList.remove("over"),g({disc:globalThis.triggerDisc,triggerRod:(t=globalThis.triggerDisc)==null?void 0:t.parentElement,targetRod:this.querySelector(".rod")})):this.classList.remove("over--invalid"),e.stopPropagation(),!1}const P=e=>{const t=e;t.addEventListener("dragover",V),t.addEventListener("dragenter",H),t.addEventListener("dragleave",F),t.addEventListener("drop",Z)};function C(){globalThis.discs=[1,2,3].map(m),globalThis.rods[0].prepend(...globalThis.discs.reverse()),c(globalThis.rods[0].lastChild),O(),globalThis.timeLeft=60,globalThis.redoMoves=[],globalThis.undoMoves=[],u(),p(),L()}const b=()=>{globalThis.timeLeft<1&&(console.log("new timer"),setTimeout(globalThis.timeoutFunction,1e3));for(const e of globalThis.discs)e.remove();globalThis.undoButton.remove(),globalThis.redoButton.remove(),globalThis.upButton.remove(),globalThis.downButton.remove(),globalThis.counter.remove(),globalThis.triggerDisc=null,globalThis.discs.length=0,globalThis.redoMoves.length=0,globalThis.undoMoves.length=0,C()};function U(){var t,n;globalThis.rods=[1,2,3].map(l=>document.querySelector(`#rod--${l}`)),document.querySelectorAll(".rod-container").forEach(P);const e=document.createElement("button");e.id="close-button",e.append(a(S)),e.addEventListener("click",()=>globalThis.confirmDialog.close()),(t=document.querySelector("#dialog-header"))==null||t.append(e),globalThis.movesCounter=document.querySelector("#moves-counter"),globalThis.timeCounter=document.querySelector("#time-counter"),globalThis.confirmDialog=document.querySelector("#confirm-dialog"),globalThis.confirmDialog.addEventListener("close",()=>{globalThis.confirmDialog.returnValue==="default"&&b()}),globalThis.timeoutFunction=()=>{if(globalThis.timeLeft===0){v("Unfortunately, Time is Up!");return}globalThis.timeLeft--,L(),setTimeout(globalThis.timeoutFunction,1e3)},(n=document.querySelector("#play-again"))==null||n.addEventListener("click",()=>b()),setTimeout(globalThis.timeoutFunction,1e3)}U();C();
